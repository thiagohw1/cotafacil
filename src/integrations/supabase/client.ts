// This file is automatically generated. Do not edit it directly.
import { createClient } from '@supabase/supabase-js';
import type { Database } from './types';

const SUPABASE_URL = import.meta.env.VITE_SUPABASE_URL;
const SUPABASE_PUBLISHABLE_KEY = import.meta.env.VITE_SUPABASE_PUBLISHABLE_KEY;
const SUPABASE_SERVICE_ROLE_KEY = import.meta.env.VITE_SUPABASE_SERVICE_ROLE_KEY;

// ============================================================================
// CLIENTE P√öBLICO (anon) - Para opera√ß√µes normais com RLS
// ============================================================================
// Use este para opera√ß√µes de usu√°rios autenticados
// Respeita Row Level Security (RLS)
export const supabase = createClient<Database>(SUPABASE_URL, SUPABASE_PUBLISHABLE_KEY, {
  auth: {
    storage: localStorage,
    persistSession: true,
    autoRefreshToken: true,
  }
});

// ============================================================================
// CLIENTE ADMINISTRATIVO (service_role) - Para opera√ß√µes completas
// ============================================================================
// ‚ö†Ô∏è ATEN√á√ÉO: Este cliente tem ACESSO TOTAL ao banco de dados
// - Bypassa todas as pol√≠ticas RLS
// - Pode executar qualquer opera√ß√£o DDL/DML
// - Adequado para migrations, scripts administrativos e opera√ß√µes em massa
// 
// üîí SEGURAN√áA: 
// - NUNCA exponha o service_role_key no frontend em produ√ß√£o
// - Use apenas em opera√ß√µes administrativas controladas
// - Considere mover para backend/server-side em produ√ß√£o
export const supabaseAdmin = SUPABASE_SERVICE_ROLE_KEY
  ? createClient<Database>(SUPABASE_URL, SUPABASE_SERVICE_ROLE_KEY, {
    auth: {
      storage: localStorage,
      persistSession: true,
      autoRefreshToken: true,
    }
  })
  : null;

// ============================================================================
// HELPER: Verifica se cliente admin est√° dispon√≠vel
// ============================================================================
export const hasAdminAccess = () => supabaseAdmin !== null;

// ============================================================================
// TIPOS DE EXPORTA√á√ÉO
// ============================================================================
export type { Database } from './types';
